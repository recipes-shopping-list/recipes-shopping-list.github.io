function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"q5z/":function(e,t,r){"use strict";r.r(t),r.d(t,"ShoppingListModule",(function(){return E}));var n=r("PCNd"),i=r("tyNb"),o=r("mrSG"),s=r("VfN6"),a=r("fXoL"),c=r("rBQ2"),u=r("3Pt+"),l=r("bOdf"),f={required:"This field is required.",email:"Please enter a valid email address.",min:"Invalid amount.",maxlength:"You have reached the maximum number of characters allowed for this field.",max:"You have reached the maximum number of characters allowed for this field."},d=r("ofXK");function b(e,t){if(1&e&&(a.Qb(0,"div",4),a.oc(1),a.Pb()),2&e){var r=a.ac(2);a.Ab(1),a.qc("",r.getError(),"\n")}}var m=function(e){return{"-highlighted":e}};function p(e,t){if(1&e){var r=a.Rb();a.Qb(0,"div",1),a.bc(1),a.Qb(2,"img",2),a.Yb("mouseover",(function(){return a.ic(r),a.ac().showError=!0}))("mouseout",(function(){return a.ic(r),a.ac().showError=!1})),a.Pb(),a.mc(3,b,2,1,"div",3),a.Pb()}if(2&e){var n=a.ac();a.Cb(n.fromParentClass),a.dc("ngClass",a.fc(4,m,n.isHighlighted)),a.Ab(3),a.dc("ngIf",n.showError)}}var h,g=["*"],v=((h=function(){function e(){_classCallCheck(this,e),this.fromParentClass="",this.errorClass="",this.errorMessages=f}return _createClass(e,[{key:"getError",value:function(){var e=this,t=this.fcn.control.errors,r="";return t&&Object.keys(t).some((function(n){if(t[n])return r=e.errorMap&&e.errorMap[n]?e.errorMap[n]:e.errorMessages[n],!0})),Array.isArray(r)?r:r?[r]:[]}},{key:"control",get:function(){return this.fcn.control}},{key:"isHighlighted",get:function(){var e=this.control.invalid&&(this.control.dirty||this.control.touched);return e&&(this.fieldErrors=this.getError()),e}}]),e}()).\u0275fac=function(e){return new(e||h)},h.\u0275cmp=a.Fb({type:h,selectors:[["app-form-control"]],contentQueries:function(e,t,r){var n;1&e&&a.lc(r,u.c,!0),2&e&&a.gc(n=a.Zb())&&(t.fcn=n.first)},inputs:{errorMap:"errorMap",fromParentClass:"fromParentClass",errorClass:"errorClass"},ngContentSelectors:g,decls:1,vars:1,consts:[["class","form-control-wrapper","tabindex","-1",3,"ngClass","class",4,"ngIf"],["tabindex","-1",1,"form-control-wrapper",3,"ngClass"],["src","assets/icons/error.svg",1,"form-control-wrapper__excl-mark",3,"mouseover","mouseout"],["class","form-control-wrapper__error",4,"ngIf"],[1,"form-control-wrapper__error"]],template:function(e,t){1&e&&(a.cc(),a.mc(0,p,4,6,"div",0)),2&e&&a.dc("ngIf",t.fcn)},directives:[d.j,d.h],encapsulation:2}),h);function y(e,t){if(1&e&&(a.Ob(0),a.Qb(1,"button",13),a.oc(2,"Update"),a.Pb(),a.Nb()),2&e){var r=a.ac();a.Ab(1),a.dc("disabled",r.form.invalid)}}function w(e,t){if(1&e&&(a.Qb(0,"button",13),a.oc(1,"Add"),a.Pb()),2&e){var r=a.ac();a.dc("disabled",r.form.invalid)}}var C,k=((C=function(){function e(t,r){_classCallCheck(this,e),this.fb=t,this.sls=r,this.editMode=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.buildForm(),this.sls.startedEditing.pipe(Object(s.b)(this),Object(l.a)((function(t){return e.sls.getIngredientById(t)}))).subscribe((function(t){var r,n,i;e.form.patchValue({id:null===(r=t[0])||void 0===r?void 0:r.id,name:null===(n=t[0])||void 0===n?void 0:n.name,amount:null===(i=t[0])||void 0===i?void 0:i.amount}),e.editMode=!0}))}},{key:"buildForm",value:function(){this.form=this.fb.group({id:[null],name:[null,u.j.required],amount:[null,[u.j.required,u.j.min(1)]]})}},{key:"submit",value:function(){var e=this;if(this.editMode){var t=this.form.getRawValue();this.sls.updateNewSetOfIngredients(t),this.editMode=!1,this.reset()}else this.sls.getIngredients().subscribe((function(t){var r=t.sort((function(e,t){return t.id-e.id}))[0],n=e.form.getRawValue();e.sls.addNewSetOfIngredients({id:(null==r?void 0:r.id)+1,name:n.name,amount:n.amount})}))}},{key:"deleteIngredients",value:function(){var e=this;this.sls.getIngredients().subscribe((function(t){var r=e.form.getRawValue();if(r.id){var n=t.findIndex((function(e){return e.id===r.id}));e.sls.removeNewSetOfIngredients(n)}else alert("please select ingredients");e.reset()}))}},{key:"reset",value:function(){this.name.reset(),this.amount.reset(),this.id.reset()}},{key:"name",get:function(){return this.form.get("name")}},{key:"amount",get:function(){return this.form.get("amount")}},{key:"id",get:function(){return this.form.get("id")}}]),e}()).\u0275fac=function(e){return new(e||C)(a.Lb(u.b),a.Lb(c.b))},C.\u0275cmp=a.Fb({type:C,selectors:[["app-shopping-edit"]],decls:23,vars:3,consts:[[3,"formGroup","submit"],[1,"row"],[1,"col-lg-12"],[1,"col-sm-5","form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[4,"ngIf","ngIfElse"],["showAddButton",""],["type","button",1,"btn","btn-danger","mx-1",3,"click"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["type","sumbit",1,"btn","btn-success","mr-1",3,"disabled"]],template:function(e,t){if(1&e&&(a.Qb(0,"form",0),a.Yb("submit",(function(){return t.submit()})),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",1),a.Qb(4,"div",3),a.Qb(5,"app-form-control"),a.Qb(6,"label",4),a.oc(7,"Name"),a.Pb(),a.Mb(8,"input",5),a.Pb(),a.Pb(),a.Qb(9,"div",6),a.Qb(10,"app-form-control"),a.Qb(11,"label",7),a.oc(12,"Amount"),a.Pb(),a.Mb(13,"input",8),a.Pb(),a.Pb(),a.Pb(),a.Qb(14,"div",1),a.Qb(15,"div",2),a.mc(16,y,3,1,"ng-container",9),a.mc(17,w,2,1,"ng-template",null,10,a.nc),a.Qb(19,"button",11),a.Yb("click",(function(){return t.deleteIngredients()})),a.oc(20,"Delete"),a.Pb(),a.Qb(21,"button",12),a.Yb("click",(function(){return t.reset()})),a.oc(22,"Clear"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e){var r=a.hc(18);a.dc("formGroup",t.form),a.Ab(16),a.dc("ngIf",t.editMode)("ngIfElse",r)}},directives:[u.k,u.g,u.d,v,u.a,u.f,u.c,u.h,d.j],styles:[""]}),C=Object(o.a)([Object(s.a)()],C));function P(e,t){if(1&e){var r=a.Rb();a.Qb(0,"a",4),a.Yb("click",(function(){a.ic(r);var e=t.$implicit;return a.ac().onEditItem(e.id)})),a.oc(1),a.Pb()}if(2&e){var n=t.$implicit;a.Ab(1),a.rc(" ",n.name," (",n.amount,") ")}}var I,Q,O,_=((I=function(){function e(t,r,n){_classCallCheck(this,e),this.sls=t,this.rs=r,this.ar=n,this.ingredients=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.ar.paramMap.pipe(Object(s.b)(this)).subscribe((function(t){if(t.has("id")){var r=+t.get("id");e.rs.getRecipeById(r).subscribe((function(t){t[0].ingredients.map((function(t){e.sls.addNewSetOfIngredients(t)}))}))}e.sls.getIngredients().pipe(Object(s.b)(e)).subscribe((function(t){e.ingredients=t}))}))}},{key:"onEditItem",value:function(e){this.sls.startedEditing.next(e)}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnChanges",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||I)(a.Lb(c.b),a.Lb(c.a),a.Lb(i.a))},I.\u0275cmp=a.Fb({type:I,selectors:[["app-shopping-list"]],features:[a.yb],decls:6,vars:1,consts:[[1,"row"],[1,"col-lg-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Mb(2,"app-shopping-edit"),a.Mb(3,"hr"),a.Qb(4,"ul",2),a.mc(5,P,2,2,"a",3),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.Ab(5),a.dc("ngForOf",t.ingredients))},directives:[k,d.i],styles:[""]}),I=Object(o.a)([Object(s.a)()],I)),M=[{path:"",component:_},{path:":id",component:_}],j=((O=function e(){_classCallCheck(this,e)}).\u0275mod=a.Jb({type:O}),O.\u0275inj=a.Ib({factory:function(e){return new(e||O)},imports:[[i.f.forChild(M)],i.f]}),O),E=((Q=function e(){_classCallCheck(this,e)}).\u0275mod=a.Jb({type:Q}),Q.\u0275inj=a.Ib({factory:function(e){return new(e||Q)},imports:[[n.a,j]]}),Q)}}]);