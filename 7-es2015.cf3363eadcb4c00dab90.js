(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"q5z/":function(t,e,i){"use strict";i.r(e),i.d(e,"ShoppingListModule",(function(){return P}));var n=i("PCNd"),s=i("tyNb"),o=i("mrSG"),r=i("VfN6"),c=i("fXoL"),b=i("rBQ2"),d=i("3Pt+"),l=i("bOdf"),a=i("AJBB"),u=i("ofXK");function m(t,e){if(1&t&&(c.Ob(0),c.Qb(1,"button",13),c.oc(2,"Update"),c.Pb(),c.Nb()),2&t){const t=c.ac();c.Ab(1),c.dc("disabled",t.form.invalid)}}function p(t,e){if(1&t&&(c.Qb(0,"button",13),c.oc(1,"Add"),c.Pb()),2&t){const t=c.ac();c.dc("disabled",t.form.invalid)}}let f=(()=>{let t=class{constructor(t,e){this.fb=t,this.sls=e,this.editMode=!1}ngOnInit(){this.buildForm(),this.sls.startedEditing.pipe(Object(r.b)(this),Object(l.a)(t=>this.sls.getIngredientById(t))).subscribe(t=>{var e,i,n;this.form.patchValue({id:null===(e=t[0])||void 0===e?void 0:e.id,name:null===(i=t[0])||void 0===i?void 0:i.name,amount:null===(n=t[0])||void 0===n?void 0:n.amount}),this.editMode=!0})}buildForm(){this.form=this.fb.group({id:[null],name:[null,d.l.required],amount:[null,[d.l.required,d.l.min(1)]]})}submit(){if(this.editMode){const t=this.form.getRawValue();this.sls.updateNewSetOfIngredients(t),this.editMode=!1,this.reset()}else this.sls.getIngredients().subscribe(t=>{const e=t.sort((t,e)=>e.id-t.id)[0],i=this.form.getRawValue();this.sls.addNewSetOfIngredients({id:(null==e?void 0:e.id)+1,name:i.name,amount:i.amount})})}deleteIngredients(){this.sls.getIngredients().subscribe(t=>{const e=this.form.getRawValue();if(e.id){const i=t.findIndex(t=>t.id===e.id);this.sls.removeNewSetOfIngredients(i)}else alert("please select ingredients");this.reset()})}reset(){this.name.reset(),this.amount.reset(),this.id.reset()}get name(){return this.form.get("name")}get amount(){return this.form.get("amount")}get id(){return this.form.get("id")}};return t.\u0275fac=function(e){return new(e||t)(c.Lb(d.c),c.Lb(b.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-shopping-edit"]],decls:23,vars:3,consts:[[3,"formGroup","submit"],[1,"row"],[1,"col-lg-12"],[1,"col-sm-5","form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[4,"ngIf","ngIfElse"],["showAddButton",""],["type","button",1,"btn","btn-danger","mx-1",3,"click"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["type","sumbit",1,"btn","btn-success","mr-1",3,"disabled"]],template:function(t,e){if(1&t&&(c.Qb(0,"form",0),c.Yb("submit",(function(){return e.submit()})),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",1),c.Qb(4,"div",3),c.Qb(5,"app-form-control"),c.Qb(6,"label",4),c.oc(7,"Name"),c.Pb(),c.Mb(8,"input",5),c.Pb(),c.Pb(),c.Qb(9,"div",6),c.Qb(10,"app-form-control"),c.Qb(11,"label",7),c.oc(12,"Amount"),c.Pb(),c.Mb(13,"input",8),c.Pb(),c.Pb(),c.Pb(),c.Qb(14,"div",1),c.Qb(15,"div",2),c.mc(16,m,3,1,"ng-container",9),c.mc(17,p,2,1,"ng-template",null,10,c.nc),c.Qb(19,"button",11),c.Yb("click",(function(){return e.deleteIngredients()})),c.oc(20,"Delete"),c.Pb(),c.Qb(21,"button",12),c.Yb("click",(function(){return e.reset()})),c.oc(22,"Clear"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){const t=c.hc(18);c.dc("formGroup",e.form),c.Ab(16),c.dc("ngIf",e.editMode)("ngIfElse",t)}},directives:[d.m,d.i,d.e,a.a,d.a,d.h,d.d,d.j,u.j],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ef5350!important}"]}),t=Object(o.a)([Object(r.a)()],t),t})();function g(t,e){if(1&t){const t=c.Rb();c.Qb(0,"a",4),c.Yb("click",(function(){c.ic(t);const i=e.$implicit;return c.ac().onEditItem(i.id)})),c.oc(1),c.Pb()}if(2&t){const t=e.$implicit;c.Ab(1),c.rc(" ",t.name," (",t.amount,") ")}}let h=(()=>{let t=class{constructor(t,e,i){this.sls=t,this.rs=e,this.ar=i,this.ingredients=[]}ngOnInit(){this.ar.paramMap.pipe(Object(r.b)(this)).subscribe(t=>{if(t.has("id")){const e=+t.get("id");this.rs.getRecipeById(e).subscribe(t=>{t[0].ingredients.map(t=>{this.sls.addNewSetOfIngredients(t)})})}this.sls.getIngredients().pipe(Object(r.b)(this)).subscribe(t=>{this.ingredients=t})})}onEditItem(t){this.sls.startedEditing.next(t)}ngAfterViewInit(){}ngOnChanges(t){}};return t.\u0275fac=function(e){return new(e||t)(c.Lb(b.b),c.Lb(b.a),c.Lb(s.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-shopping-list"]],features:[c.yb],decls:6,vars:1,consts:[[1,"row"],[1,"col-lg-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Mb(2,"app-shopping-edit"),c.Mb(3,"hr"),c.Qb(4,"ul",2),c.mc(5,g,2,2,"a",3),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.Ab(5),c.dc("ngForOf",e.ingredients))},directives:[f,u.i],styles:[""]}),t=Object(o.a)([Object(r.a)()],t),t})();const v=[{path:"",component:h},{path:":id",component:h}];let I=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[s.f.forChild(v)],s.f]}),t})(),P=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[n.a,I]]}),t})()}}]);