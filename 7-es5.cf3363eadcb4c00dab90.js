function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"q5z/":function(t,e,n){"use strict";n.r(e),n.d(e,"ShoppingListModule",(function(){return C}));var i=n("PCNd"),r=n("tyNb"),o=n("mrSG"),s=n("VfN6"),a=n("fXoL"),c=n("rBQ2"),u=n("3Pt+"),l=n("bOdf"),b=n("AJBB"),d=n("ofXK");function f(t,e){if(1&t&&(a.Ob(0),a.Qb(1,"button",13),a.oc(2,"Update"),a.Pb(),a.Nb()),2&t){var n=a.ac();a.Ab(1),a.dc("disabled",n.form.invalid)}}function m(t,e){if(1&t&&(a.Qb(0,"button",13),a.oc(1,"Add"),a.Pb()),2&t){var n=a.ac();a.dc("disabled",n.form.invalid)}}var p,g=((p=function(){function t(e,n){_classCallCheck(this,t),this.fb=e,this.sls=n,this.editMode=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.buildForm(),this.sls.startedEditing.pipe(Object(s.b)(this),Object(l.a)((function(e){return t.sls.getIngredientById(e)}))).subscribe((function(e){var n,i,r;t.form.patchValue({id:null===(n=e[0])||void 0===n?void 0:n.id,name:null===(i=e[0])||void 0===i?void 0:i.name,amount:null===(r=e[0])||void 0===r?void 0:r.amount}),t.editMode=!0}))}},{key:"buildForm",value:function(){this.form=this.fb.group({id:[null],name:[null,u.l.required],amount:[null,[u.l.required,u.l.min(1)]]})}},{key:"submit",value:function(){var t=this;if(this.editMode){var e=this.form.getRawValue();this.sls.updateNewSetOfIngredients(e),this.editMode=!1,this.reset()}else this.sls.getIngredients().subscribe((function(e){var n=e.sort((function(t,e){return e.id-t.id}))[0],i=t.form.getRawValue();t.sls.addNewSetOfIngredients({id:(null==n?void 0:n.id)+1,name:i.name,amount:i.amount})}))}},{key:"deleteIngredients",value:function(){var t=this;this.sls.getIngredients().subscribe((function(e){var n=t.form.getRawValue();if(n.id){var i=e.findIndex((function(t){return t.id===n.id}));t.sls.removeNewSetOfIngredients(i)}else alert("please select ingredients");t.reset()}))}},{key:"reset",value:function(){this.name.reset(),this.amount.reset(),this.id.reset()}},{key:"name",get:function(){return this.form.get("name")}},{key:"amount",get:function(){return this.form.get("amount")}},{key:"id",get:function(){return this.form.get("id")}}]),t}()).\u0275fac=function(t){return new(t||p)(a.Lb(u.c),a.Lb(c.b))},p.\u0275cmp=a.Fb({type:p,selectors:[["app-shopping-edit"]],decls:23,vars:3,consts:[[3,"formGroup","submit"],[1,"row"],[1,"col-lg-12"],[1,"col-sm-5","form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[4,"ngIf","ngIfElse"],["showAddButton",""],["type","button",1,"btn","btn-danger","mx-1",3,"click"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["type","sumbit",1,"btn","btn-success","mr-1",3,"disabled"]],template:function(t,e){if(1&t&&(a.Qb(0,"form",0),a.Yb("submit",(function(){return e.submit()})),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",1),a.Qb(4,"div",3),a.Qb(5,"app-form-control"),a.Qb(6,"label",4),a.oc(7,"Name"),a.Pb(),a.Mb(8,"input",5),a.Pb(),a.Pb(),a.Qb(9,"div",6),a.Qb(10,"app-form-control"),a.Qb(11,"label",7),a.oc(12,"Amount"),a.Pb(),a.Mb(13,"input",8),a.Pb(),a.Pb(),a.Pb(),a.Qb(14,"div",1),a.Qb(15,"div",2),a.mc(16,f,3,1,"ng-container",9),a.mc(17,m,2,1,"ng-template",null,10,a.nc),a.Qb(19,"button",11),a.Yb("click",(function(){return e.deleteIngredients()})),a.oc(20,"Delete"),a.Pb(),a.Qb(21,"button",12),a.Yb("click",(function(){return e.reset()})),a.oc(22,"Clear"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&t){var n=a.hc(18);a.dc("formGroup",e.form),a.Ab(16),a.dc("ngIf",e.editMode)("ngIfElse",n)}},directives:[u.m,u.i,u.e,b.a,u.a,u.h,u.d,u.j,d.j],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ef5350!important}"]}),p=Object(o.a)([Object(s.a)()],p));function h(t,e){if(1&t){var n=a.Rb();a.Qb(0,"a",4),a.Yb("click",(function(){a.ic(n);var t=e.$implicit;return a.ac().onEditItem(t.id)})),a.oc(1),a.Pb()}if(2&t){var i=e.$implicit;a.Ab(1),a.rc(" ",i.name," (",i.amount,") ")}}var v,y,k,P=((v=function(){function t(e,n,i){_classCallCheck(this,t),this.sls=e,this.rs=n,this.ar=i,this.ingredients=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.ar.paramMap.pipe(Object(s.b)(this)).subscribe((function(e){if(e.has("id")){var n=+e.get("id");t.rs.getRecipeById(n).subscribe((function(e){e[0].ingredients.map((function(e){t.sls.addNewSetOfIngredients(e)}))}))}t.sls.getIngredients().pipe(Object(s.b)(t)).subscribe((function(e){t.ingredients=e}))}))}},{key:"onEditItem",value:function(t){this.sls.startedEditing.next(t)}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnChanges",value:function(t){}}]),t}()).\u0275fac=function(t){return new(t||v)(a.Lb(c.b),a.Lb(c.a),a.Lb(r.a))},v.\u0275cmp=a.Fb({type:v,selectors:[["app-shopping-list"]],features:[a.yb],decls:6,vars:1,consts:[[1,"row"],[1,"col-lg-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Mb(2,"app-shopping-edit"),a.Mb(3,"hr"),a.Qb(4,"ul",2),a.mc(5,h,2,2,"a",3),a.Pb(),a.Pb(),a.Pb()),2&t&&(a.Ab(5),a.dc("ngForOf",e.ingredients))},directives:[g,d.i],styles:[""]}),v=Object(o.a)([Object(s.a)()],v)),w=[{path:"",component:P},{path:":id",component:P}],I=((k=function t(){_classCallCheck(this,t)}).\u0275mod=a.Jb({type:k}),k.\u0275inj=a.Ib({factory:function(t){return new(t||k)},imports:[[r.f.forChild(w)],r.f]}),k),C=((y=function t(){_classCallCheck(this,t)}).\u0275mod=a.Jb({type:y}),y.\u0275inj=a.Ib({factory:function(t){return new(t||y)},imports:[[i.a,I]]}),y)}}]);