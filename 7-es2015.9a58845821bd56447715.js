(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"q5z/":function(t,e,n){"use strict";n.r(e),n.d(e,"ShoppingListModule",(function(){return S}));var i=n("PCNd"),s=n("tyNb"),r=n("mrSG"),o=n("VfN6"),c=n("fXoL"),b=n("rBQ2"),d=n("3Pt+"),a=n("bOdf"),l=n("AJBB"),u=n("ofXK");function m(t,e){1&t&&(c.Qb(0),c.yc(1," Update "),c.Pb())}function p(t,e){1&t&&c.yc(0," Add ")}let f=(()=>{let t=class{constructor(t,e){this.fb=t,this.sls=e,this.editMode=!1}ngOnInit(){this.buildForm(),this.sls.startedEditing.pipe(Object(o.b)(this),Object(a.a)(t=>this.sls.getIngredientById(t))).subscribe(t=>{var e,n,i;this.form.patchValue({id:null===(e=t[0])||void 0===e?void 0:e.id,name:null===(n=t[0])||void 0===n?void 0:n.name,amount:null===(i=t[0])||void 0===i?void 0:i.amount}),this.editMode=!0})}buildForm(){this.form=this.fb.group({id:[null],name:[null,d.n.required],amount:[null,[d.n.required,d.n.min(1)]]})}submit(){if(this.editMode){const t=this.form.getRawValue();this.sls.updateNewSetOfIngredients(t),this.editMode=!1,this.reset()}else this.sls.getIngredients().subscribe(t=>{const e=t.sort((t,e)=>e.id-t.id)[0],n=this.form.getRawValue();this.sls.addNewSetOfIngredients({id:(null==e?void 0:e.id)+1,name:n.name,amount:n.amount})})}deleteIngredients(){this.sls.getIngredients().subscribe(t=>{const e=this.form.getRawValue();if(e.id){const n=t.findIndex(t=>t.id===e.id);this.sls.removeNewSetOfIngredients(n)}else alert("please select ingredients");this.reset()})}reset(){this.name.reset(),this.amount.reset(),this.id.reset()}get name(){return this.form.get("name")}get amount(){return this.form.get("amount")}get id(){return this.form.get("id")}};return t.\u0275fac=function(e){return new(e||t)(c.Nb(d.c),c.Nb(b.b))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-shopping-edit"]],decls:24,vars:4,consts:[[3,"formGroup","submit"],[1,"row"],[1,"col-lg-12"],[1,"col-sm-5","form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],["type","sumbit",1,"btn","btn-success","mr-1",3,"disabled"],[4,"ngIf","ngIfElse"],["showAddButton",""],["type","button",1,"btn","btn-danger","mx-1",3,"click"],["type","button",1,"btn","btn-primary","mx-1",3,"click"]],template:function(t,e){if(1&t&&(c.Sb(0,"form",0),c.ac("submit",(function(){return e.submit()})),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"div",1),c.Sb(4,"div",3),c.Sb(5,"label",4),c.yc(6,"Name"),c.Rb(),c.Sb(7,"app-form-control"),c.Ob(8,"input",5),c.Rb(),c.Rb(),c.Sb(9,"div",6),c.Sb(10,"label",7),c.yc(11,"Amount"),c.Rb(),c.Sb(12,"app-form-control"),c.Ob(13,"input",8),c.Rb(),c.Rb(),c.Rb(),c.Sb(14,"div",1),c.Sb(15,"div",2),c.Sb(16,"button",9),c.wc(17,m,2,0,"ng-container",10),c.wc(18,p,1,0,"ng-template",null,11,c.xc),c.Rb(),c.Sb(20,"button",12),c.ac("click",(function(){return e.deleteIngredients()})),c.yc(21,"Delete"),c.Rb(),c.Sb(22,"button",13),c.ac("click",(function(){return e.reset()})),c.yc(23,"Clear"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&t){const t=c.oc(19);c.hc("formGroup",e.form),c.Bb(16),c.hc("disabled",e.form.invalid),c.Bb(1),c.hc("ngIf",e.editMode)("ngIfElse",t)}},directives:[d.o,d.k,d.e,l.a,d.a,d.j,d.d,d.l,u.k],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ef5350!important}"]}),t=Object(r.a)([Object(o.a)()],t),t})();function g(t,e){if(1&t){const t=c.Tb();c.Sb(0,"a",4),c.ac("click",(function(){c.pc(t);const n=e.$implicit;return c.cc().onEditItem(n.id)})),c.yc(1),c.Rb()}if(2&t){const t=e.$implicit;c.Bb(1),c.Bc(" ",t.name," (",t.amount,") ")}}let h=(()=>{let t=class{constructor(t,e,n){this.sls=t,this.rs=e,this.ar=n,this.ingredients=[]}ngOnInit(){this.ar.paramMap.pipe(Object(o.b)(this)).subscribe(t=>{if(t.has("id")){const e=+t.get("id");this.rs.getRecipeById(e).subscribe(t=>{t[0].ingredients.map(t=>{this.sls.addNewSetOfIngredients(t)})})}this.sls.getIngredients().pipe(Object(o.b)(this)).subscribe(t=>{this.ingredients=t})})}onEditItem(t){this.sls.startedEditing.next(t)}ngAfterViewInit(){}ngOnChanges(t){}};return t.\u0275fac=function(e){return new(e||t)(c.Nb(b.b),c.Nb(b.a),c.Nb(s.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-shopping-list"]],features:[c.zb],decls:6,vars:1,consts:[[1,"row"],[1,"col-lg-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Ob(2,"app-shopping-edit"),c.Ob(3,"hr"),c.Sb(4,"ul",2),c.wc(5,g,2,2,"a",3),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.Bb(5),c.hc("ngForOf",e.ingredients))},directives:[f,u.j],styles:[""]}),t=Object(r.a)([Object(o.a)()],t),t})();const v=[{path:"",component:h},{path:":id",component:h}];let y=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[s.g.forChild(v)],s.g]}),t})(),S=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[i.a,y]]}),t})()}}]);