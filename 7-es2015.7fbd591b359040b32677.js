(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"q5z/":function(t,e,r){"use strict";r.r(e),r.d(e,"ShoppingListModule",(function(){return C}));var n=r("PCNd"),s=r("tyNb"),i=r("mrSG"),o=r("VfN6"),c=r("fXoL"),a=r("rBQ2"),l=r("3Pt+"),d=r("bOdf");const b={required:"This field is required.",email:"Please enter a valid email address.",min:"Invalid amount.",maxlength:"You have reached the maximum number of characters allowed for this field.",max:"You have reached the maximum number of characters allowed for this field."};var u=r("ofXK");function m(t,e){if(1&t&&(c.Qb(0,"div",4),c.oc(1),c.Pb()),2&t){const t=c.ac(2);c.Ab(1),c.qc("",t.getError(),"\n")}}const f=function(t){return{"-highlighted":t}};function h(t,e){if(1&t){const t=c.Rb();c.Qb(0,"div",1),c.bc(1),c.Qb(2,"img",2),c.Yb("mouseover",(function(){return c.ic(t),c.ac().showError=!0}))("mouseout",(function(){return c.ic(t),c.ac().showError=!1})),c.Pb(),c.mc(3,m,2,1,"div",3),c.Pb()}if(2&t){const t=c.ac();c.Cb(t.fromParentClass),c.dc("ngClass",c.fc(4,f,t.isHighlighted)),c.Ab(3),c.dc("ngIf",t.showError)}}const p=["*"];let g=(()=>{class t{constructor(){this.fromParentClass="",this.errorClass="",this.errorMessages=b}getError(){const t=this.fcn.control.errors;let e="";return t&&Object.keys(t).some(r=>{if(t[r])return e=this.errorMap&&this.errorMap[r]?this.errorMap[r]:this.errorMessages[r],!0}),Array.isArray(e)?e:e?[e]:[]}get control(){return this.fcn.control}get isHighlighted(){const t=this.control.invalid&&(this.control.dirty||this.control.touched);return t&&(this.fieldErrors=this.getError()),t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["app-form-control"]],contentQueries:function(t,e,r){var n;1&t&&c.lc(r,l.c,!0),2&t&&c.gc(n=c.Zb())&&(e.fcn=n.first)},inputs:{errorMap:"errorMap",fromParentClass:"fromParentClass",errorClass:"errorClass"},ngContentSelectors:p,decls:1,vars:1,consts:[["class","form-control-wrapper","tabindex","-1",3,"ngClass","class",4,"ngIf"],["tabindex","-1",1,"form-control-wrapper",3,"ngClass"],["src","assets/icons/error.svg",1,"form-control-wrapper__excl-mark",3,"mouseover","mouseout"],["class","form-control-wrapper__error",4,"ngIf"],[1,"form-control-wrapper__error"]],template:function(t,e){1&t&&(c.cc(),c.mc(0,h,4,6,"div",0)),2&t&&c.dc("ngIf",e.fcn)},directives:[u.j,u.h],encapsulation:2}),t})();function v(t,e){if(1&t&&(c.Ob(0),c.Qb(1,"button",13),c.oc(2,"Update"),c.Pb(),c.Nb()),2&t){const t=c.ac();c.Ab(1),c.dc("disabled",t.form.invalid)}}function w(t,e){if(1&t&&(c.Qb(0,"button",13),c.oc(1,"Add"),c.Pb()),2&t){const t=c.ac();c.dc("disabled",t.form.invalid)}}let P=(()=>{let t=class{constructor(t,e){this.fb=t,this.sls=e,this.editMode=!1}ngOnInit(){this.buildForm(),this.sls.startedEditing.pipe(Object(o.b)(this),Object(d.a)(t=>this.sls.getIngredientById(t))).subscribe(t=>{var e,r,n;this.form.patchValue({id:null===(e=t[0])||void 0===e?void 0:e.id,name:null===(r=t[0])||void 0===r?void 0:r.name,amount:null===(n=t[0])||void 0===n?void 0:n.amount}),this.editMode=!0})}buildForm(){this.form=this.fb.group({id:[null],name:[null,l.j.required],amount:[null,[l.j.required,l.j.min(1)]]})}submit(){if(this.editMode){const t=this.form.getRawValue();this.sls.updateNewSetOfIngredients(t),this.editMode=!1,this.reset()}else this.sls.getIngredients().subscribe(t=>{const e=t.sort((t,e)=>e.id-t.id)[0],r=this.form.getRawValue();this.sls.addNewSetOfIngredients({id:(null==e?void 0:e.id)+1,name:r.name,amount:r.amount})})}deleteIngredients(){this.sls.getIngredients().subscribe(t=>{const e=this.form.getRawValue();if(e.id){const r=t.findIndex(t=>t.id===e.id);this.sls.removeNewSetOfIngredients(r)}else alert("please select ingredients");this.reset()})}reset(){this.name.reset(),this.amount.reset(),this.id.reset()}get name(){return this.form.get("name")}get amount(){return this.form.get("amount")}get id(){return this.form.get("id")}};return t.\u0275fac=function(e){return new(e||t)(c.Lb(l.b),c.Lb(a.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-shopping-edit"]],decls:23,vars:3,consts:[[3,"formGroup","submit"],[1,"row"],[1,"col-lg-12"],[1,"col-sm-5","form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[4,"ngIf","ngIfElse"],["showAddButton",""],["type","button",1,"btn","btn-danger","mx-1",3,"click"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["type","sumbit",1,"btn","btn-success","mr-1",3,"disabled"]],template:function(t,e){if(1&t&&(c.Qb(0,"form",0),c.Yb("submit",(function(){return e.submit()})),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",1),c.Qb(4,"div",3),c.Qb(5,"app-form-control"),c.Qb(6,"label",4),c.oc(7,"Name"),c.Pb(),c.Mb(8,"input",5),c.Pb(),c.Pb(),c.Qb(9,"div",6),c.Qb(10,"app-form-control"),c.Qb(11,"label",7),c.oc(12,"Amount"),c.Pb(),c.Mb(13,"input",8),c.Pb(),c.Pb(),c.Pb(),c.Qb(14,"div",1),c.Qb(15,"div",2),c.mc(16,v,3,1,"ng-container",9),c.mc(17,w,2,1,"ng-template",null,10,c.nc),c.Qb(19,"button",11),c.Yb("click",(function(){return e.deleteIngredients()})),c.oc(20,"Delete"),c.Pb(),c.Qb(21,"button",12),c.Yb("click",(function(){return e.reset()})),c.oc(22,"Clear"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){const t=c.hc(18);c.dc("formGroup",e.form),c.Ab(16),c.dc("ngIf",e.editMode)("ngIfElse",t)}},directives:[l.k,l.g,l.d,g,l.a,l.f,l.c,l.h,u.j],styles:[""]}),t=Object(i.a)([Object(o.a)()],t),t})();function I(t,e){if(1&t){const t=c.Rb();c.Qb(0,"a",4),c.Yb("click",(function(){c.ic(t);const r=e.$implicit;return c.ac().onEditItem(r.id)})),c.oc(1),c.Pb()}if(2&t){const t=e.$implicit;c.Ab(1),c.rc(" ",t.name," (",t.amount,") ")}}let Q=(()=>{let t=class{constructor(t,e,r){this.sls=t,this.rs=e,this.ar=r,this.ingredients=[]}ngOnInit(){this.ar.paramMap.pipe(Object(o.b)(this)).subscribe(t=>{if(t.has("id")){const e=+t.get("id");this.rs.getRecipeById(e).subscribe(t=>{t[0].ingredients.map(t=>{this.sls.addNewSetOfIngredients(t)})})}this.sls.getIngredients().pipe(Object(o.b)(this)).subscribe(t=>{this.ingredients=t})})}onEditItem(t){this.sls.startedEditing.next(t)}ngAfterViewInit(){}ngOnChanges(t){}};return t.\u0275fac=function(e){return new(e||t)(c.Lb(a.b),c.Lb(a.a),c.Lb(s.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-shopping-list"]],features:[c.yb],decls:6,vars:1,consts:[[1,"row"],[1,"col-lg-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Mb(2,"app-shopping-edit"),c.Mb(3,"hr"),c.Qb(4,"ul",2),c.mc(5,I,2,2,"a",3),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.Ab(5),c.dc("ngForOf",e.ingredients))},directives:[P,u.i],styles:[""]}),t=Object(i.a)([Object(o.a)()],t),t})();const y=[{path:"",component:Q},{path:":id",component:Q}];let O=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[s.f.forChild(y)],s.f]}),t})(),C=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[n.a,O]]}),t})()}}]);